type: operator
category: arithmetic-expression
name: $divide
description: |-
  The `$divide` operator divides two numbers and returns the quotient. The $divide operator returns an error if the divisor is zero.
syntax: |-
  { $divide: [ <dividend>, <divisor> ] }
parameters:
  - name: <dividend>
    type: string
    required: true
    description: |-
      Any valid expression that resolves to a number to be divided.
  - name: <divisor>
    type: string
    required: true
    description: |-
      Any valid expression that resolves to a nonzero number to divide by.
examples:
  sample: |-
    {
      "_id": "0fcc0bf0-ed18-4ab8-b558-9848e18058f4",
      "sales": { "totalSales": 75670 },
      "staff": { "totalStaff": { "fullTime": 8, "partTime": 20 } }
    }
  items:
    - title: Calculate the average sales volume per employee
      description: |-
        Calculate the average sales volume per employee and the percentage of full time staff.
      query: |-
        db.stores.aggregate([
          { $match: { _id: "40d6f4d7-50cd-4929-9a07-0a7a133c2e74" } },
          {
            $project: {
              name: 1,
              averageSalesPerStaff: {
                $divide: [
                  "$sales.totalSales",
                  { $add: ["$staff.totalStaff.fullTime", "$staff.totalStaff.partTime"] }
                ]
              },
              fullTimeStaffPercentage: {
                $multiply: [
                  {
                    $divide: [
                      "$staff.totalStaff.fullTime",
                      { $add: ["$staff.totalStaff.fullTime", "$staff.totalStaff.partTime"] }
                    ]
                  },
                  100
                ]
              }
            }
          }
        ])
      output:
        value: |-
          [
            {
              "_id": "40d6f4d7-50cd-4929-9a07-0a7a133c2e74",
              "name": "Proseware, Inc. | Home Entertainment Hub",
              "averageSalesPerStaff": 3893.95,
              "fullTimeStaffPercentage": 48.72
            }
          ]
