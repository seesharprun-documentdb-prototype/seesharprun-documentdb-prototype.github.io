type: operator
category: geospatial
name: $box
description: Defines a rectangular area for geospatial queries using two coordinate pairs, useful for finding locations within a rectangular geographical boundary.
syntax: '{ <location field>: { $geoWithin: { $box: [<lower_left>, <upper_right>] } } }'
parameters:
  - name: location field
    type: string
    required: true
    description: The field containing the geospatial data
  - name: lower_left
    type: object
    required: true
    description: Array of [longitude, latitude] specifying the bottom-left corner
  - name: upper_right
    type: object
    required: true
    description: Array of [longitude, latitude] specifying the top-right corner
examples:
  items:
    - title: Find stores within rectangular area
      description: Find stores located within a specific rectangular area defined by coordinate pairs
      query: 'db.stores.find({ location: { $geoWithin: { $box: [[-142.0012, -51.3041], [123.3403, 70.1272]] } } })'
      output:
        value: Documents where location falls within the specified rectangular boundary
    - title: Basic box query with projection
      description: Find stores within a box area and return only name and location fields
      query: 'db.stores.find({ location: { $geoWithin: { $box: [[65.0, 65.0], [75.0, 75.0]] } } }, { name: 1, location: 1 })'
      output:
        value: Stores within the box area with limited field projection
related:
  - reference: /reference/operator/geowithin
  - reference: /reference/operator/center