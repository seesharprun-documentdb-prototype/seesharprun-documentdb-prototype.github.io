type: operator
category: geospatial
name: $centerSphere
description: Specifies a circle using spherical geometry for $geoWithin queries, more accurate for Earth-based calculations that account for spherical shape.
syntax: '{ $geoWithin: { $centerSphere: [ [<longitude>, <latitude>], <radius_in_radians> ] } }'
parameters:
  - name: longitude
    type: number
    required: true
    description: The longitude of the circle's center point
  - name: latitude
    type: number
    required: true
    description: The latitude of the circle's center point
  - name: radius_in_radians
    type: number
    required: true
    description: The radius of the sphere in radians (divide distance in kilometers by 6371 to convert to radians)
examples:
  items:
    - title: Find stores within spherical area
      description: Find stores within approximately 1000 kilometers using spherical calculations
      query: 'db.stores.find({ location: { $geoWithin: { $centerSphere: [[-82.5543, -65.105], 0.157] } } })'
      output:
        value: Stores within spherical area using Earth-accurate distance calculations
    - title: Spherical query with field selection
      description: Use spherical geometry to find nearby stores with specific field projection
      query: 'db.stores.find({ location: { $geoWithin: { $centerSphere: [[-82.5543, -65.105], 0.157] } } }, { name: 1, location: 1, city: 1 })'
      output:
        value: Selected fields from stores within spherical boundary
related:
  - reference: /reference/operator/center
  - reference: /reference/operator/near