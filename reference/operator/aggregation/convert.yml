type: operator
category: aggregation
name: $convert
description: |-
  The $convert operator converts an expression into a value of the specified type.
syntax: |-
  {
    $convert: {
      input: <expression>,
      to: <type>,
      format: <binData format>,
      onError: <value to return on error>,
      onNull: <value to return on null>
    }
  }
parameters:
  - name: input
    type: object
    required: true
    description: |-
      The input value to be converted to the specified type.
  - name: to
    type: string
    required: true
    description: |-
      The type to convert the input value into.
  - name: format
    type: string
    required: false
    description: |-
      Optional. The binData format of the input or output when converting to/from binData.
  - name: onError
    type: object
    required: false
    description: |-
      Optional. The value to return when conversion fails.
  - name: onNull
    type: object
    required: false
    description: |-
      Optional. The value to return when input is null or missing.
examples:
  sample: |-
    {
      "_id": "0fcc0bf0-ed18-4ab8-b558-9848e18058f4",
      "name": "First Up Consultants | Beverage Shop",
      "staff": { "totalStaff": { "fullTime": 8 } }
    }
  items:
    - title: Convert an Int to String
      explanation: |-
        Convert the fullTime field from integer to string.
      description: |-
        This query converts a numeric value to its string representation.
      query: |-
        db.stores.aggregate([{
          $match: { _id: "b0107631-9370-4acd-aafa-8ac3511e623d" }
        }, {
          $project: {
            fulltimeStaff: "$staff.totalStaff.fullTime",
            fulltimeStaffAsString: {
              $convert: {
                input: "$staff.totalStaff.fullTime",
                to: "string"
              }
            }
          }
        }])
      output:
        value: |-
          [
            {
              "_id": "b0107631-9370-4acd-aafa-8ac3511e623d",
              "fulltimeStaff": 3,
              "fulltimeStaffAsString": "3"
            }
          ]
    - title: Convert an Int to Boolean
      explanation: |-
        Convert the fullTime field to boolean (any positive value becomes true).
      description: |-
        This query converts a numeric value to boolean type.
      query: |-
        db.stores.aggregate([{
          $match: { _id: "b0107631-9370-4acd-aafa-8ac3511e623d" }
        }, {
          $project: {
            fulltimeStaff: "$staff.totalStaff.fullTime",
            fulltimeStaffAsBool: {
              $convert: {
                input: "$staff.totalStaff.fullTime",
                to: "bool"
              }
            }
          }
        }])
      output:
        value: |-
          [
            {
              "_id": "b0107631-9370-4acd-aafa-8ac3511e623d",
              "fulltimeStaff": 3,
              "fulltimeStaffAsBool": true
            }
          ]
related:
  - reference: /operator/aggregation/tobool
  - reference: /operator/aggregation/tostring
  - reference: /operator/aggregation/toint
