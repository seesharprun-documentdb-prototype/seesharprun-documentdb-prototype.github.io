type: operator
category: aggregation
name: $indexStats
description: |-
  The `$indexStats` aggregation stage returns usage statistics for each index in the collection. This stage is useful for analyzing index performance, identifying unused indexes, and optimizing query performance.
syntax: |-
  {
    $indexStats: {}
  }
parameters: []
examples:
  sample: |-
    {
      "_id": "0fcc0bf0-ed18-4ab8-b558-9848e18058f4",
      "name": "First Up Consultants | Beverage Shop",
      "sales": { "totalSales": 75670 }
    }
  items:
    - title: Get index usage statistics
      explanation: |-
        Return usage statistics for all indexes in the stores collection.
      description: |-
        This query retrieves index usage information for performance analysis.
      query: |-
        db.stores.aggregate([
          {
            $indexStats: {}
          }
        ])
      output:
        value: |-
          [
            {
              "name": "_id_",
              "key": { "_id": 1 },
              "host": "host:port",
              "accesses": {
                "ops": 1234,
                "since": "2024-01-01T00:00:00.000Z"
              }
            }
          ]
related:
  - reference: /operator/aggregation/collstats
