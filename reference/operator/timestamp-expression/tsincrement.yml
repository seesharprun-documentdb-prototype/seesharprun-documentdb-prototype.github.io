type: operator
category: timestamp-expression
name: $tsIncrement
description: Extracts the increment portion from a timestamp value, returning the increment component of a MongoDB timestamp which consists of time and increment values.
syntax: '{ $tsIncrement: <expression> }'
parameters:
  - name: expression
    type: object
    required: true
    description: Expression that evaluates to a timestamp, returns error if not a timestamp
examples:
  items:
    - title: Extract increment from audit timestamp
      description: Get the increment value from last updated timestamp in audit log
      query: 'db.stores.aggregate([{ $match: {"_id": "2cf3f885-9962-4b67-a172-aa9039e9ae2f"} }, { $project: { name: 1, lastUpdatedIncrement: { $tsIncrement: "$auditLog.lastUpdated" } } }])'
      output:
        value: Document with lastUpdatedIncrement field containing the timestamp increment value
    - title: Extract increment for timestamp comparison
      description: Compare increment values between different timestamps
      query: 'db.events.aggregate([{ $project: { eventId: 1, startIncrement: { $tsIncrement: "$startTime" }, endIncrement: { $tsIncrement: "$endTime" } } }])'
      output:
        value: Documents with separate increment values for start and end timestamps
related:
  - reference: /reference/operator/tssecond