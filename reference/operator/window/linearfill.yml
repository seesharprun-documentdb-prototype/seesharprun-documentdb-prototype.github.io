type: operator
category: window
name: $linearFill
description: Interpolates missing values in a sequence of documents using linear interpolation, useful for filling gaps in time-series or ordered data.
syntax: '{ $linearFill: { input: <expression>, sortBy: { <field>: <1 or -1> } } }'
parameters:
  - name: input
    type: object
    required: true
    description: Field or expression to interpolate missing values for
  - name: sortBy
    type: object
    required: true
    description: Field and sort order (1 ascending, -1 descending) for interpolation
examples:
  items:
    - title: Interpolating missing sales data
      description: Fill missing sales values using linear interpolation within store partitions
      query: 'db.stores.aggregate([{ $match: { "company": { $in: ["First Up Consultants"] } } }, { $setWindowFields: { "partitionBy": "$name", "sortBy": { "storeOpeningDate": 1 }, "output": { "interpolatedSales": { "$linearFill": "$sales.totalSales" } } } }])'
      output:
        value: Stores with missing sales data filled using linear interpolation
    - title: Fill missing temperature readings
      description: Interpolate missing values in time-series sensor data
      query: 'db.sensors.aggregate([{ $setWindowFields: { "partitionBy": "$sensorId", "sortBy": { "timestamp": 1 }, "output": { "interpolatedTemp": { "$linearFill": "$temperature" } } } }])'
      output:
        value: Sensor readings with missing temperature values interpolated linearly
related:
  - reference: /reference/operator/locf